@inherits MyNavMenuModel

<MudAppBar Elevation="4" Fixed="true">
    <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="ToggleDrawer" />
    <MudImage Src="images/logo_200_60.png" Alt="Survey Shark logo" />
    <MudSpacer />

    <div class="d-none d-md-flex">
        <MudSwitch Value="@DarkTheme" Label="Dark Theme" ValueChanged="DarkThemeChanged" />
    </div>
    <div class="d-md-none">
        <MudSwitch Value="@DarkTheme" Label="Dark Theme" ValueChanged="DarkThemeChanged" Size="MudBlazor.Size.Small" />
    </div>
    <div class="d-none d-md-flex align-items-center">
        <MudButton Variant="Variant.Text" Color="Color.Inherit" Class="mx-2" Href="/">Home</MudButton>
        <MudButton Variant="Variant.Text" Color="Color.Inherit" Class="mx-2" Href="/blogs">Blogs</MudButton>
        <MudButton Variant="Variant.Text" Color="Color.Inherit" Class="mx-2" Href="/documentation">Documentation</MudButton>
        <MudMenu Label="Learn More" Variant="Variant.Text" EndIcon="@Icons.Material.Filled.KeyboardArrowDown" Color="Color.Inherit">
            <MudMenuItem Href="/learn-more/ai">AI-Powered Question Generation</MudMenuItem>
            <MudMenuItem Href="/learn-more/analytics">Real-Time Analytics</MudMenuItem>
            <MudMenuItem Href="/learn-more/mobile">Mobile-Ready & Responsive</MudMenuItem>
        </MudMenu>
        @if (IsAuthenticated && IsAdmin)
        {
            <MudMenu Label="Admin" Variant="Variant.Text" EndIcon="@Icons.Material.Filled.KeyboardArrowDown" Color="Color.Inherit">
                <MudMenuItem Href="/admin/feedback">Manage Feedback</MudMenuItem>
                <MudMenuItem Href="/admin/users">Manage Users</MudMenuItem>
                <MudMenuItem Href="/admin/settings">Settings Management</MudMenuItem>
                <MudMenuItem Href="/admin/logs">System Logs</MudMenuItem>
                <MudMenuItem Href="/ManageRolePermissions">Manage Permissions</MudMenuItem>
                @if (CanUseHangfire)
                {
                    <MudMenuItem Href="/hangfire">Background Jobs</MudMenuItem>
                }
            </MudMenu>
        }
        @if (IsAuthenticated && CanCreateSurvey)
        {
            <MudMenu Label="Surveys" Variant="Variant.Text" EndIcon="@Icons.Material.Filled.KeyboardArrowDown" Color="Color.Inherit">
                <MudMenuItem Href="/survey/create">Create Survey</MudMenuItem>
                <MudMenuItem Href="/mysurveys/surveysicreated">Surveys I've Created</MudMenuItem>
                <MudMenuItem Href="/survey/surveysianswered">Surveys I've Answered</MudMenuItem>
            </MudMenu>
        }
        @if (IsAuthenticated && CanLeaveFeedback)
        {
            <MudMenu Label="Feedback" Variant="Variant.Text" EndIcon="@Icons.Material.Filled.KeyboardArrowDown" Color="Color.Inherit">
                <MudMenuItem Href="/feedback">Leave Feedback</MudMenuItem>
                <MudMenuItem Href="/feedback/my">My Feedback</MudMenuItem>
            </MudMenu>
        }
        <div class="mx-1">
            @if (IsAuthenticated)
            {
                <MudButton Variant="Variant.Text" Color="Color.Inherit" Class="mx-2" Href="logout">Logout</MudButton>
            }
            else
            {
                <MudButton Variant="Variant.Text" Color="Color.Inherit" Class="mx-2" Href="login">Login</MudButton>
                <MudButton Variant="Variant.Text" Color="Color.Inherit" Class="mx-2" Href="register">Register</MudButton>
            }
        </div>
    </div>
</MudAppBar>

<MudDrawer @bind-Open="_drawerOpen" Anchor="MudBlazor.Anchor.Left" Variant="DrawerVariant.Temporary" Elevation="1">
    <MudDrawerHeader>Menu</MudDrawerHeader>
    <MudNavMenu>
        @if (IsAuthenticated)
        {
            <MudNavLink Href="logout">Logout</MudNavLink>
        }
        else
        {
            <MudNavLink Href="login">Login</MudNavLink>
            <MudNavLink Href="register">Register</MudNavLink>
        }
        <MudNavLink Href="/" Match="NavLinkMatch.All">Home</MudNavLink>
        <MudNavLink Href="/blogs" Match="NavLinkMatch.All">Blogs</MudNavLink>
        <MudNavLink Href="/documentation">Documentation</MudNavLink>
        <MudNavGroup Title="Learn More" Icon="@Icons.Material.Filled.Info">
            <MudNavLink Href="/learn-more/ai">AI-Powered Question Generation</MudNavLink>
            <MudNavLink Href="/learn-more/analytics">Real-Time Analytics</MudNavLink>
            <MudNavLink Href="/learn-more/mobile">Mobile-Ready & Responsive</MudNavLink>
        </MudNavGroup>
        @if (IsAuthenticated && IsAdmin)
        {
            <MudNavGroup Title="Admin" Expanded="false">
                <MudNavLink Href="/admin/feedback">Manage Feedback</MudNavLink>
                <MudNavLink Href="/admin/users">Manage Users</MudNavLink>
                <MudNavLink Href="/admin/settings">Settings Management</MudNavLink>
                <MudNavLink Href="/admin/logs">System Logs</MudNavLink>
                <MudNavLink Href="/ManageRolePermissions">Manage Permissions</MudNavLink>
                @if (CanUseHangfire)
                {
                    <MudNavLink Href="/hangfire">Background Jobs</MudNavLink>
                }
            </MudNavGroup>
        }
        @if (IsAuthenticated && CanCreateSurvey)
        {
            <MudNavGroup Title="Surveys" Expanded="false">
                <MudNavLink Href="/survey/create">Create Survey</MudNavLink>
                <MudNavLink Href="/mysurveys/surveysicreated">Surveys I've Created</MudNavLink>
                <MudNavLink Href="/survey/surveysianswered">Surveys I've Answered</MudNavLink>
            </MudNavGroup>
        }
        @if (IsAuthenticated && CanLeaveFeedback)
        {
            <MudNavGroup Title="Feedback" Expanded="false">
                <MudNavLink Href="/feedback">Leave Feedback</MudNavLink>
                <MudNavLink Href="/feedback/my">My Feedback</MudNavLink>
            </MudNavGroup>
        }
        <MudNavLink Href="/privacy-policy" Underline="Underline.None" Typo="Typo.inherit">Privacy Policy</MudNavLink>
        <MudNavLink Href="/cookie-policy" Underline="Underline.None" Typo="Typo.inherit">Cookie Policy</MudNavLink>
        <MudNavLink Href="/terms-of-service" Underline="Underline.None" Typo="Typo.inherit">Terms of Service</MudNavLink>

        @if (!string.IsNullOrEmpty(AppSettings?.EmailSettings?.CustomerServiceEmail))
        {            
            <MudNavLink Href="@($"mailto://{AppSettings.EmailSettings.CustomerServiceEmail}")" Underline="Underline.None" Typo="Typo.inherit">Contact Us</MudNavLink>                        
        }

        <MudImage Src="images/sectigo_trust_seal_sm_82x32.png" Alt="Sectigo Trust Seal" />
    </MudNavMenu>
</MudDrawer>